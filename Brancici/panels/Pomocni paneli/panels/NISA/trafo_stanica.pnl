V 13
2
LANG:10024 0 
LANG:10027 0 
PANEL,-1 -1 215 100 N "_3DFace" 4
"$NISA"
"$SYS"
"$TS"
"$TS2"
E E E E E 1 -1 -1 0  40 130
""0  1
E E 3
"CBRef" "1"
"EClose" E
"dpi" "96.0946"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
2
LANG:10024 0 
LANG:10027 0 
6 0
"RECTANGLE1"
""
1 40 130 E E E 1 E 1 E N {0,0,0} E N "STD_grey_middle" E E
 E E
0 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
"main()
{
  
  dpConnect(\"work\", $TS2 + \".state.vrata1_zatvorena\");
  dpConnect(\"work2\", $TS2 + \".state.vrata2_zatvorena\");
}

work(string dp, bool zatvorena) {
  if (!zatvorena) {
    otvorena_vrata.visible = true;
    rucka_otvorena.visible = true;
    rucka_zatvorena.visible = false;
    unutrasnjost.backCol = \"{255,255,50}\";
  }
  
  else if (zatvorena) {
    otvorena_vrata.visible = false;
    rucka_otvorena.visible = false;
    rucka_zatvorena.visible = true;
    unutrasnjost.backCol = \"STD_grey_middle\";
  }
}

work2(string dp, bool zatvorena) {
  if (!zatvorena) {
    otvorena_vrata2.visible = true;
    rucka_otvorena2.visible = true;
    rucka_zatvorena2.visible = false;
    unutrasnjost2.backCol = \"{255,255,50}\";
  }
  
  else if (zatvorena) {
    otvorena_vrata2.visible = false;
    rucka_otvorena2.visible = false;
    rucka_zatvorena2.visible = true;
    unutrasnjost2.backCol = \"STD_grey_middle\";
  }
}" 0
 E 0 1 1 2 1 E 1.018245341614907 0 0.8571428571428571 -21.0494953416149 -82.85714285714285 1 E 40 130 100 190
2 2
"PRIMITIVE_TEXT1"
""
1 140 20 E E E 1 E 1 E N "black" E N "_Window" E E
 E E
2 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

3
"sizePolicy" "Fixed Fixed"
"dashclr"N "_Transparent"
"antiAliased" "0"
"main()
{
  string s = $TS;
  strreplace(s, \"OA-\", \"\");
  strreplace(s, \"_\", \"\\n\");
  this.text = latinToCyrillic(s);
}" 0
 E 0 1 1 2 1 E U  0 E 140 20 141 32
0 2 2 "0s" 0 0 0 193 0 0  140 20 1
2
LANG:10024 35 MS Shell Dlg 2,-1,11,5,50,0,0,0,0,0
LANG:10027 35 MS Shell Dlg 2,-1,12,5,75,0,0,0,0,0
0 2
LANG:10024 0 
LANG:10027 0 
6 3
"unutrasnjost"
""
1 90 110 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
3 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "0"
E "main()
{
  EP_childPanelOn();
}

void EP_childPanelOn()
{
  //sdOpenPopup(\"\", \"NISA/status_nise.pnl\", \"\", 0, 0, 0, makeDynString(\"$NISA:\" + $NISA),false);
}







" 0
 0 1 3 2 1 E 0.2127659574468075 0 0.2512934388445826 20.85106382978734 13.10057886995306 1 E 90 110 184 264
7 4
"rucka_zatvorena"
""
1 165 225 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
4 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 0.2127659574468075 0 0.2512934388445826 6.88994813109781 5.382473648159547 1 E 165 225 2.5 2.5
10 5
"otvorena_vrata"
""
1 187 113 E E E 1 E 1 E N {0,0,0} E N "STD_grey_middle" E E
 E E
5 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 0.2127659574468075 0 0.2512934388445826 20.212765957447 12.34669855341929 1 E 4 187 113
160 150
160 300
187 267
 1
7 6
"rucka_otvorena"
""
1 165 225 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
6 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 0.2127659574468075 0 0.2512934388445826 20.27534418022549 10.88328382132436 1 E 165 225 2.5 2.5
10 7
"alert"
""
1 140 270 E E E 1 E 1 E N {0,0,0} E N "WF_RefDiffLineDark" E E
 E E
7 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
"main()
{
  string query = \"SELECT '_original.._value' FROM '\" + $NISA + \".A*.state.bit.b*'\";
  //dpQueryConnectSingle(\"test\", true, \"Identi\", query); 
}

test (anytype ident, dyn_dyn_anytype niz) {
  //alert.backCol = \"WF_RefDiffLineDark\";
  string dpe;
  int value;
  mapping alarms;
  string opis;
  string sys_name = \"SysSarani:\";
  
  dyn_string bez_alarma = makeDynString(\"Rezerva\", \"rezerva\", \"lanterna\", \"osvjetljenj\", \"osvetljenj\", \"vrata\", \"ventilator\", 
                                        \"klapna\", \"trofazna\", \"kvar\", \"servis\", \"Status-monofazna\",\"Ventilator\",
                                        \"OA-SOS.D1\", \"OA-SOS.D2\", \"OA-SOS.D3\", \"OA-SOS.D5\", \"OA-SOS.D6\", \"OA-SOS.D7\", \"OA-SOS.D8\",
                                        \"OA-SOS.L1\", \"OA-SOS.L2\", \"OA-SOS.L3\", \"OA-SOS.L5\", \"OA-SOS.L6\", \"OA-SOS.L7\",
                                        \"OA-TK.D2\", \"OA-PS.1\", \"LK 230V\", \"S2\");
  
  for(int i = 2; i <= dynlen(niz); i++)  //starta sa 2 zato sto liste pocinju od 1, a sql upit vraca u prvoj liniji header pa treba i njega preskociti
  {    
    value = niz[i][2];
    dpe = niz[i][1];
    opis=dpGetDescription(dpe);
    bool nije_za_alarm = false;
    for (int j=1; j <= dynlen(bez_alarma); j++) {
      if (strpos(opis, bez_alarma[j]) >= 0)
        nije_za_alarm = true;
    }
    if (value == 0 && !nije_za_alarm) {
      alert.backCol = \"S7_toleranceWentUnq\";
      return;
    }
  }
  
  alert.backCol = \"\";
}



" 0
 "main()
{
  EP_childPanelOn();
}

void EP_childPanelOn()
{
  //sdOpenPopup(\"\", \"panel_ack_fire.pnl\", \"\", 0, 0, 0, makeDynString(\"$MAN_DP:\" + $MAN_DP),false);
  ChildPanelOnRelativ(\"ENERGETIKA/DIONICA/ORMAN_AUTOMATIKE.pnl\",\"ENERGETIKA\", makeDynString(\"$NISA:\" + $TS, \"$SYS:\" + $SYS),50, -90);
}

" 0
 0 1 3 2 1 E 0.1170555233826382 -0.03930966801826247 0.02640902240563647 0.09882053560581709 21.67838803134683 44.1056548214703 1 E 15 140 270
130 270
120 300
120 300
120 300
120 300
120 300
170 270
160 270
230 200
180 200
230 150
200 150
150 210
200 210
 1
10 26
"POLYGON9"
""
1 80.7750388198758 80.00000000000001 E E E 1 E 1 E N {0,0,0} E N "STD_grey_middle" E E
 E E
26 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E U  1 E 4 80.7750388198758 80.00000000000001
100 70
100 20
80.7750388198758 28.57142857142857
 1
10 27
"POLYGON10"
""
1 19.68031832298139 28.57142857142857 E E E 1 E 1 E N {0,0,0} E N "WF_Text" E E
 E E
27 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E U  1 E 4 19.68031832298139 28.57142857142857
40 20
100 20
80.7750388198758 28.57142857142857
 1
10 35
"unutrasnjost2"
""
1 80.39124370242658 80.21242195752816 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
35 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 1 0 1 4.608756297573422 -2.212421957528164 1 E 4 80.39124370242658 80.21242195752816
92.43894634926622 73.89271675065318
92.43894634926622 39.89271675065318
80.34703015858472 46
 1
10 41
"otvorena_vrata2"
""
1 97.04770264683964 37.68029479312501 E E E 1 E 1 E N {0,0,0} E N "STD_grey_middle" E E
 E E
41 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E U  1 E 4 97.04770264683964 37.68029479312501
93.31514962014465 50.76287331845326
93.31514962014465 84.76287331845326
97.04770264683964 71.68029479312501
 1
7 42
"rucka_zatvorena2"
""
1 165 225 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
42 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 0.2127659574468075 0 0.2512934388445826 50.87151024935584 3.724531684093385 1 E 165 225 2.5 2.5
7 43
"rucka_otvorena2"
""
1 165 225 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
43 0 0 0 0 0
E E E
0
2
LANG:10024 0 
LANG:10027 0 

2
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 3 2 1 E 0.2127659574468075 0 0.2512934388445826 58.89361702127677 5.458976259968928 1 E 165 225 2.5 2.5
0
LAYER, 1 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 2 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 3 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 4 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 5 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 6 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 7 
2
LANG:10024 0 
LANG:10027 0 
0
0
