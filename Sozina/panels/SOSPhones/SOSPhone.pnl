V 14
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 
PANEL,-1 -1 292 342 N "_3DFace" 2
"$SOS_DP"
"$SYSTEMNAME"
E E E E E 1 -1 -1 0  4 17
""0  1
E "mapping fromDynStringToMap (dyn_string dynString)
{

    mapping returnMap;

    for (int i = 1; i <= dynlen(dynString); i++)
    {
        string mappingKey = \"\";
        string mappingValue = \"\";
        string stringPart = dynString[i];
        int j = 0;
        while (stringPart[j] != \"|\")
        {
            mappingKey = mappingKey + stringPart[j];
            j++;
        }
        j++;
        while (j < strlen(stringPart))
        {
            mappingValue = mappingValue + stringPart[j];
            j++;
        }
        returnMap[mappingKey] = mappingValue;
    }
    return returnMap;
}" 0
 3
"CBRef" "1"
"EClose" E
"dpi" "120"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
1
LANG:10001 0 
7 10
"PhoneFrame"
""
1 335 325 E E E 1 E 1 E N {0,0,0} E N "WF_Text" E E
 E E
9 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 335.6162949516906 291.0373281444851 210 210
7 11
"ELLIPSE3"
""
1 335 325 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
10 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 335.6162949516906 291.0373281444851 186 186
4 12
"LINE1"
""
1 109.9566920239245 173.5297619047618 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
11 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  109.9566920239245 173.5297619047618 129.7662158334483 207.1130952380952
4 13
"LINE2"
""
1 126.8138348810674 163.5654761904762 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
12 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  126.8138348810674 163.5654761904762 146.6233586905911 197.1488095238096
4 14
"LINE4"
""
1 110.4410350393371 171.3143886719701 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
13 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  110.4410350393371 171.3143886719701 124.1154221826547 163.1360081534266
4 15
"LINE5"
""
1 107.4935708571443 176.3097645252534 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
14 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  107.4935708571443 176.3097645252534 93.75314652403807 187.3569021414132
10 16
"POLYGON4"
""
1 258.8725437978476 173.4868540973025 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
15 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 5 258.8725437978476 173.4868540973025
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
298.3452488030235 243.2958988269306
 1
10 17
"POLYGON2"
""
1 264.824154165737 163.0746562889702 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
16 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 8 264.824154165737 163.0746562889702
263.8461538461539 167.6923076923077
303.8461538461539 237.6923076923077
311.2325899033813 244.0746562889702
338.8443331735419 227.027907813594
340 220
297.8846153846154 146.9230769230769
292.4358974358976 146.027907813594
 1
10 18
"POLYGON3"
""
1 264.824154165737 163.0746562889702 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
17 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 31.5360667402924 179.3422204042595 1 E 8 264.824154165737 163.0746562889702
263.8461538461539 167.6923076923077
303.8461538461539 237.6923076923077
311.2325899033813 244.0746562889702
338.8443331735419 227.027907813594
340 220
297.8846153846154 146.9230769230769
292.4358974358976 146.027907813594
 1
10 19
"POLYGON5"
""
1 258.8725437978476 173.4868540973025 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
18 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.2433255619123215 -0.4178597786231838 -0.4313391263207059 -0.2357216381025614 192.0442748927842 445.0859082570659 1 E 5 258.8725437978476 173.4868540973025
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
298.3452488030235 243.2958988269306
 1
7 20
"ELLIPSE2"
""
1 210 315 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
19 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 1 1 E 0.5465607502463024 -0.1238933209766089 0.2109618848540542 0.3824044425717408 -49.88243012949241 148.1487023827783 1 E 210 315 40 155
4 21
"LINE3"
""
1 133.4242603570276 210.1751029576844 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
20 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  133.4242603570276 210.1751029576844 147.0986475003452 201.9967224391409
7 22
"ELLIPSE1"
""
1 440 275 E E E 1 E 1 E N "_Transparent" E N "_3DFace" E E
 E E
21 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 1 1 E 0.4843134223516813 -0.106662045530753 0.1870278582338596 0.3698712261414624 -123.4615193837089 182.7585395995876 1 E 440 275 30 75
10 23
"POLYGON8"
""
1 311.2325899033813 244.0746562889702 E E E 1 E 1 E N "_Transparent" E N "_3DFace" E E
 E E
22 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 4 311.2325899033813 244.0746562889702
338.8443331735419 227.027907813594
397.9327117670251 325.8355136189986
360 350
 1
10 24
"POLYGON6"
""
1 258.8725437978476 173.4868540973025 E E E 1 E 1 E N "_Transparent" E N "_3DFace" E E
 E E
23 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 5 258.8725437978476 173.4868540973025
263.8461538461539 167.6923076923077
310 240
320 250
310 260
 1
10 25
"POLYGON10"
""
1 405.6894866857098 423.0046112671974 E E E 1 E 1 E N "_3DFace" E N "_3DFace" E E
 E E
24 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 -20.70997464274208 93.07738095238091 1 E 4 405.6894866857098 423.0046112671974
364.2818194756214 354.3256314938532
360 330
409.3429681772815 417.4999134977123
 1
6 26
"RECTANGLE3"
""
1 10 10 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
25 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 2 1 E 0.3645569620253166 0 0.7571428571428578 -1.645569620253244 -1.42857142857151 1 E 10 10 800 60
2 27
"PRIMITIVE_TEXT10"
""
1 148.078125 16.73214285714283 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
26 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"#uses \"latin_to_cyrillic.ctl\"

main()
{
  string phoneDp = $SOS_DP;
  strreplace(phoneDp, \"PHONE-\", \"\");
  this.text = latinToCyrillic(\"STATUS SOS TELEFONA \" + phoneDp);
}" 0
 E 0 1 1 2 1 E U  0 E 148.078125 16.73214285714283 149 34
0 2 2 "0s" 0 0 0 193 0 0  148.078125 16.73214285714283 1
3
LANG:10001 26 Arial,-1,15,5,75,0,0,0,0,0
LANG:10024 26 Arial,-1,15,5,75,0,0,0,0,0
LANG:10027 26 Arial,-1,15,5,75,0,0,0,0,0
0 3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 
2 28
"PRIMITIVE_TEXT11"
""
1 18.62499999999992 53.62539613076048 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
27 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"#uses \"latin_to_cyrillic.ctl\"
#uses \"log.ctl\"
#uses \"basicMethods.ctl\"


main()
{
    string datapointName = $SYSTEMNAME + $SOS_DP + \".state.phoneState\";
    int dpConnectState;

    if(!dpExists(datapointName))
    {
        Log::error(\"dpExists\", \"Datapoint does not exist <%s>.\", datapointName);
        return;
    }

    if (dpConnect(\"checkPhoneState\", datapointName) != 0)
    {
        Log::error(\"dpConnect\", \"Failed dpConnect <%s>.\", datapointName);
    }
}

void checkPhoneState(string dpSource, string phoneState)
{
    dyn_string dynStringStateText, dynStringStateColor;

    getDP($SYSTEMNAME + $SOS_DP + \".settings.mappedStateText:_default.._value\", dynStringStateText);
    getDP($SYSTEMNAME + $SOS_DP + \".settings.mappedStateColor:_default.._value\", dynStringStateColor);

    mapping mappedStateText = fromDynStringToMap(dynStringStateText);
    mapping mappedStateColor = fromDynStringToMap(dynStringStateColor);

    string stateText;
    string stateColor;

    if (!mappingHasKey(mappedStateColor, phoneState))
    {
        stateColor = mappedStateColor[\"other\"];
        stateText = latinToCyrillic(mappedStateText[\"other\"]);
    }
    else
    {
        stateColor = mappedStateColor[phoneState];
        stateText = latinToCyrillic(mappedStateText[phoneState]);
    }

    this.text(stateText);
    PhoneFrame.backCol(stateColor);
}


" 0
 E 0 1 1 2 1 E U  0 E 18.62499999999992 53.62539613076048 20 72
0 2 2 "0s" 0 0 0 192 0 0  18.62499999999992 53.62539613076048 1
3
LANG:10001 26 Arial,-1,16,5,75,0,0,0,0,0
LANG:10024 26 Arial,-1,16,5,75,0,0,0,0,0
LANG:10027 26 Arial,-1,16,5,75,0,0,0,0,0
0 3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 
2 31
"PRIMITIVE_TEXT12"
""
1 19.49999999999992 84.75616231209878 E E E 1 E 1 E N "_WindowText" E N "_Window" E E
 E E
28 0 0 0 0 0
E E E
0
3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"#uses \"latin_to_cyrillic.ctl\"
#uses \"log.ctl\"
#uses \"basicMethods.ctl\"

main()
{
    string datapointName = $SYSTEMNAME + $SOS_DP + \".settings.phoneNumber\";

    if (dpConnect(\"showPhoneNumber\", datapointName) != 0)
    {
        Log::error(\"dpConnect\", \"Failed dpConnect <%s>.\", datapointName);
    }
}

void showPhoneNumber (string datapointName, int phoneNumber)
{
    this.text = latinToCyrillic(\"Broj telefona: \" + phoneNumber);
}
" 0
 E 0 1 1 2 1 E U  0 E 19.49999999999992 84.75616231209878 21 103
0 2 2 "0s" 0 0 0 192 0 0  19.49999999999992 84.75616231209878 1
3
LANG:10001 26 Arial,-1,16,5,75,0,0,0,0,0
LANG:10024 26 Arial,-1,16,5,75,0,0,0,0,0
LANG:10027 26 Arial,-1,16,5,75,0,0,0,0,0
0 3
LANG:10001 0 
LANG:10024 0 
LANG:10027 0 
0
LAYER, 1 
1
LANG:10001 0 
0
LAYER, 2 
1
LANG:10001 0 
0
LAYER, 3 
1
LANG:10001 0 
0
LAYER, 4 
1
LANG:10001 0 
0
LAYER, 5 
1
LANG:10001 0 
0
LAYER, 6 
1
LANG:10001 0 
0
LAYER, 7 
1
LANG:10001 0 
0
1 0 "SHAPE_GROUP0" -1
14 0 
12 13 14 15 16 17 18 19 20 21 22 23 24 25 

"layoutAlignment" "AlignCenter"
"" ""
0
