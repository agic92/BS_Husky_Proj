V 14
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 
PANEL,-1 -1 363 374 N "_3DFace" 2
"$SOS_DP"
"$SYSTEMNAME"
E E E E E 1 -1 -1 0  4 17
""0  1
E "mapping fromDynStringToMap (dyn_string dynString)
{

    mapping returnMap;

    for (int i = 1; i <= dynlen(dynString); i++)
    {
        string mappingKey = \"\";
        string mappingValue = \"\";
        string stringPart = dynString[i];
        int j = 0;
        while (stringPart[j] != \"|\")
        {
            mappingKey = mappingKey + stringPart[j];
            j++;
        }
        j++;
        while (j < strlen(stringPart))
        {
            mappingValue = mappingValue + stringPart[j];
            j++;
        }
        returnMap[mappingKey] = mappingValue;
    }
    return returnMap;
}" 0
 3
"CBRef" "1"
"EClose" E
"dpi" "120"
0 0 0
""
DISPLAY_LAYER, 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0
LAYER, 0 
2
LANG:10024 0 
LANG:10027 0 
7 10
"PhoneFrame"
""
1 335 325 E E E 1 E 1 E N {0,0,0} E N "WF_Text" E E
 E E
9 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 335.6162949516906 291.0373281444851 210 210
7 11
"ELLIPSE3"
""
1 335 325 E E E 1 E 1 E N {0,0,0} E N "_3DFace" E E
 E E
10 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 335.6162949516906 291.0373281444851 186 186
4 12
"LINE1"
""
1 145.7619047619046 197.3937537513352 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
11 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  145.7619047619046 197.3937537513352 165.5714285714284 230.9770870846686
4 13
"LINE2"
""
1 162.6190476190475 187.4294680370496 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
12 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  162.6190476190475 187.4294680370496 182.4285714285712 221.012801370383
4 14
"LINE4"
""
1 146.2462477773172 195.1783805185435 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
13 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  146.2462477773172 195.1783805185435 159.9206349206348 187
4 15
"LINE5"
""
1 143.2987835951244 200.1737563718268 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
14 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  143.2987835951244 200.1737563718268 129.5583592620182 211.2208939879866
10 16
"POLYGON4"
""
1 258.8725437978476 173.4868540973025 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
15 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 5 258.8725437978476 173.4868540973025
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
298.3452488030235 243.2958988269306
 1
10 17
"POLYGON2"
""
1 264.824154165737 163.0746562889702 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
16 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 8 264.824154165737 163.0746562889702
263.8461538461539 167.6923076923077
303.8461538461539 237.6923076923077
311.2325899033813 244.0746562889702
338.8443331735419 227.027907813594
340 220
297.8846153846154 146.9230769230769
292.4358974358976 146.027907813594
 1
10 18
"POLYGON3"
""
1 264.824154165737 163.0746562889702 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
17 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 67.34127947827247 203.2062122508329 1 E 8 264.824154165737 163.0746562889702
263.8461538461539 167.6923076923077
303.8461538461539 237.6923076923077
311.2325899033813 244.0746562889702
338.8443331735419 227.027907813594
340 220
297.8846153846154 146.9230769230769
292.4358974358976 146.027907813594
 1
10 19
"POLYGON5"
""
1 258.8725437978476 173.4868540973025 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
18 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.2433255619123215 -0.4178597786231838 -0.4313391263207059 -0.2357216381025614 227.8494876307643 468.9499001036393 1 E 5 258.8725437978476 173.4868540973025
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
231.1274562021524 196.5131459026975
298.3452488030235 243.2958988269306
 1
7 20
"ELLIPSE2"
""
1 210 315 E E E 1 E 1 E N {0,0,0} E N "black" E E
 E E
19 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 1 1 E 0.5465607502463024 -0.1238933209766089 0.2109618848540542 0.3824044425717408 -14.07721739151234 172.0126942293517 1 E 210 315 40 155
4 21
"LINE3"
""
1 169.2294730950077 234.0390948042578 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
20 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E  169.2294730950077 234.0390948042578 182.9038602383253 225.8607142857143
7 22
"ELLIPSE1"
""
1 440 275 E E E 1 E 1 E N "_Transparent" E N "_3DFace" E E
 E E
21 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 1 1 E 0.4843134223516813 -0.106662045530753 0.1870278582338596 0.3698712261414624 -87.65630664572883 206.622531446161 1 E 440 275 30 75
10 23
"POLYGON8"
""
1 311.2325899033813 244.0746562889702 E E E 1 E 1 E N "_Transparent" E N "_3DFace" E E
 E E
22 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 4 311.2325899033813 244.0746562889702
338.8443331735419 227.027907813594
397.9327117670251 325.8355136189986
360 350
 1
10 24
"POLYGON6"
""
1 258.8725437978476 173.4868540973025 E E E 1 E 1 E N "_Transparent" E N "_3DFace" E E
 E E
23 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 5 258.8725437978476 173.4868540973025
263.8461538461539 167.6923076923077
310 240
320 250
310 260
 1
10 25
"POLYGON10"
""
1 405.6894866857098 423.0046112671974 E E E 1 E 1 E N "_3DFace" E N "_3DFace" E E
 E E
24 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "1"
E E 0 1 1 2 1 E 0.4952380952380954 0 0.4797619047619049 15.09523809523799 116.9413727989543 1 E 4 405.6894866857098 423.0046112671974
364.2818194756214 354.3256314938532
360 330
409.3429681772815 417.4999134977123
 1
6 26
"RECTANGLE3"
""
1 10 10 E E E 1 E 1 E N {0,0,0} E N {255,255,255} E E
 E E
25 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

3
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
E E 0 1 1 2 1 E 0.4531645569620255 0 0.796992481203008 -2.531645569620342 -1.819548872180537 1 E 10 10 800 60
2 27
"PRIMITIVE_TEXT10"
""
1 180.5390625 16.3471569548871 E E E 1 E 1 E N "WF_Text" E N "_Window" E E
 E E
26 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"#uses \"latin_to_cyrillic.ctl\"

main()
{
    string phoneName = $SOS_DP;
    strreplace(phoneName, \"PHONE-\", \"\");
    this.text = latinToCyrillic(\"STATUS SOS TELEFONA \" + phoneName);
}" 0
 E 0 1 1 2 1 E U  0 E 180.5390625 16.3471569548871 182 35.80321898496238
0 2 2 "0s" 0 0 0 193 0 0  180.5390625 16.3471569548871 1
3
LANG:10024 32 Roboto,-1,17,5,75,0,0,0,0,0,Bold
LANG:10027 32 Roboto,-1,17,5,75,0,0,0,0,0,Bold
LANG:10001 26 Arial,-1,16,5,75,0,0,0,0,0
0 3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 
2 28
"PRIMITIVE_TEXT11"
""
1 18.62499999999992 85.62539613076048 E E E 1 E 1 E N "WF_Text" E N "_Window" E E
 E E
27 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"#uses \"latin_to_cyrillic.ctl\"
#uses \"log.ctl\"
#uses \"basicMethods.ctl\"


main()
{
    string datapointName = $SYSTEMNAME + $SOS_DP + \".state.phoneState\";
    int dpConnectState;

    if(!dpExists(datapointName))
    {
        Log::error(\"dpExists\", \"Datapoint does not exist <%s>.\", datapointName);
        return;
    }

    if (dpConnect(\"checkPhoneState\", datapointName) != 0)
    {
        Log::error(\"dpConnect\", \"Failed dpConnect <%s>.\", datapointName);
    }
}

void checkPhoneState(string dpSource, int integerPhoneState)
{
    string stringPhoneState = (string)integerPhoneState;
    dyn_string dynStringStateText, dynStringStateColor;

    getDP($SYSTEMNAME + $SOS_DP + \".settings.mappedStateText:_default.._value\", dynStringStateText);
    getDP($SYSTEMNAME + $SOS_DP + \".settings.mappedStateColor:_default.._value\", dynStringStateColor);

    mapping mappedStateText = fromDynStringToMap(dynStringStateText);
    mapping mappedStateColor = fromDynStringToMap(dynStringStateColor);

    string stateText;
    string stateColor;

    if (!mappingHasKey(mappedStateColor, stringPhoneState))
    {
        stateColor = mappedStateColor[\"other\"];
        stateText = latinToCyrillic(mappedStateText[\"other\"]);
    }
    else
    {
        stateColor = mappedStateColor[stringPhoneState];
        stateText = latinToCyrillic(mappedStateText[stringPhoneState]);
    }

    this.text(stateText);
    PhoneFrame.backCol(stateColor);
}


" 0
 E 0 1 1 2 1 E U  0 E 18.62499999999992 85.62539613076048 20 100
0 2 2 "0s" 0 0 0 192 0 0  18.62499999999992 85.62539613076048 1
3
LANG:10024 32 Roboto,-1,13,5,75,0,0,0,0,0,Bold
LANG:10027 32 Roboto,-1,13,5,75,0,0,0,0,0,Bold
LANG:10001 26 Arial,-1,16,5,75,0,0,0,0,0
0 3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 
2 31
"PRIMITIVE_TEXT12"
""
1 19.49999999999992 116.7561623120988 E E E 1 E 1 E N "WF_Text" E N "_Window" E E
 E E
28 0 0 0 0 0
E E E
0
3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 

4
"sizePolicy" "Fixed Fixed"
"layoutAlignment" "AlignCenter"
"dashclr"N "_Transparent"
"antiAliased" "0"
"#uses \"latin_to_cyrillic.ctl\"
#uses \"log.ctl\"
#uses \"basicMethods.ctl\"

main()
{
    string datapointName = $SYSTEMNAME + $SOS_DP + \".settings.phoneNumber\";

    if (dpConnect(\"showPhoneNumber\", datapointName) != 0)
    {
        Log::error(\"dpConnect\", \"Failed dpConnect <%s>.\", datapointName);
    }
}

void showPhoneNumber (string datapointName, int phoneNumber)
{
    this.text = latinToCyrillic(\"Broj telefona: \" + phoneNumber);
}
" 0
 E 0 1 1 2 1 E U  0 E 19.49999999999992 116.7561623120988 21 131
0 2 2 "0s" 0 0 0 192 0 0  19.49999999999992 116.7561623120988 1
3
LANG:10024 32 Roboto,-1,13,5,75,0,0,0,0,0,Bold
LANG:10027 32 Roboto,-1,13,5,75,0,0,0,0,0,Bold
LANG:10001 26 Arial,-1,16,5,75,0,0,0,0,0
0 3
LANG:10024 0 
LANG:10027 0 
LANG:10001 0 
0
LAYER, 1 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 2 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 3 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 4 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 5 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 6 
2
LANG:10024 0 
LANG:10027 0 
0
LAYER, 7 
2
LANG:10024 0 
LANG:10027 0 
0
1 0 "SHAPE_GROUP0" -1
14 0 
12 13 14 15 16 17 18 19 20 21 22 23 24 25 

"layoutAlignment" "AlignCenter"
"" ""
0
